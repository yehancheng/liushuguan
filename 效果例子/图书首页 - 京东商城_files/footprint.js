/*
 JD Modules Compressed by uglify 
 Author:keelii 
 Date: 2013-12-31 
 */
function log(e,t){var a="";for(i=2;arguments.length>i;i++)a=a+arguments[i]+"|||";var s=decodeURIComponent(escape(getCookie("pin"))),n="http://csc."+pageConfig.FN_getDomain()+"/log.ashx?type1=$type1$&type2=$type2$&data=$data$&pin=$pin$&referrer=$referrer$&jinfo=$jinfo$&callback=?",o=n.replace(/\$type1\$/,escape(e));o=o.replace(/\$type2\$/,escape(t)),o=o.replace(/\$data\$/,escape(a)),o=o.replace(/\$pin\$/,escape(s)),o=o.replace(/\$referrer\$/,escape(document.referrer)),o=o.replace(/\$jinfo\$/,escape("")),$.getJSON(o,function(){});var r=("https:"==document.location.protocol?"https://mercuryssl":"http://mercury")+".jd.com/log.gif"+"?t=other.000000"+"&m=UA-J2011-1"+"&v="+encodeURIComponent("t1="+e+"$t2="+t+"$p0="+a)+"&ref="+encodeURIComponent(document.referrer)+"&rm="+(new Date).getTime(),l=new Image(1,1);l.src=r}function clsPVAndShowLog(e,t,a,s){var i=e+"."+a+"."+skutype(t)+"."+s;log("d","o",i)}function clsClickLog(e,t,a,s,i,n){var o=e+"."+s+"."+skutype(t);appendCookie(n,a,o),log("d","o",o+".c")}function appendCookie(reCookieName,sku,key){var reWidsCookies=eval("("+getCookie(reCookieName)+")");(null==reWidsCookies||""==reWidsCookies)&&(reWidsCookies={}),null==reWidsCookies[key]&&(reWidsCookies[key]="");var pos=reWidsCookies[key].indexOf(sku);0>pos&&(reWidsCookies[key]=reWidsCookies[key]+","+sku),setCookie(reCookieName,$.toJSON(reWidsCookies),15)}function skutype(e){if(e){var t=(""+e).length;return 10==t?1:0}return 0}function setCookie(e,t,a){var s=a,i=new Date;i.setTime(i.getTime()+1e3*60*60*24*s),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()+";path=/;domain=."+pageConfig.FN_getDomain()}function getCookie(e){var t=document.cookie.match(RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null}function clsLog(e,t,a,s,i){appendCookie(i,a,e),a=a.split("#")[0],log(3,e,a)}(function(e){e.fn.imgScroll=function(t,a){var s={data:[],template:null,evtType:"click",visible:1,direction:"x",next:"#next",prev:"#prev",disableClass:"disabled",disableClassPerfix:!1,speed:300,step:1,loop:!1,showControl:!1,width:null,height:null,navItems:!1,navItmesWrapClass:"scroll-nav-wrap",navItemActivedClass:"current",status:!1,statusWrapSelector:".scroll-status-wrap"},i=e.extend(s,t);return this.each(function(){function t(e){f>b&&!j?(C.addClass(_),k.removeClass(N)):j||k.addClass(N),"left"!==h.eq(0).css("float")&&h.css("float","left"),v=i.width||h.eq(0).outerWidth(),g=i.height||h.eq(0).outerHeight(),u.css({position:"static"==u.css("position")?"relative":u.css("position"),width:"x"==e?v*b:v,height:"x"==e?g:g*b,overflow:"hidden"}),m.css({position:"absolute",width:"x"==e?v*f:v,height:"x"==e?g:g*f,top:0,left:0}),"function"==typeof a&&a.apply(u,[y,w,h.slice(y*$,y*$+b),h.slice(y*$+b-$,y*$+b)])}function s(){f=i.data.length,m=u.find("ul").eq(0),h=m.children("li"),w=Math.ceil((f-b)/$)+1,q=0===(f-b)%$}function n(e){var t={list:e};u.html(Y.process(t)),s()}function o(e,t){function s(){j?(M=b>=f-e*$?!0:!1,L=0>=e?!0:!1):(b>=f-e*$?(k.addClass(N),M=!0):(k.removeClass(N),M=!1),0>=e?(C.addClass(_),L=!0):(C.removeClass(_),L=!1)),(J||S)&&d(e),"function"==typeof a&&a.apply(u,[e,w,h.slice(e*$,e*$+b),h.slice(e*$+b-$,e*$+b)])}if(m.is(":animated"))return!1;if(j)L&&t&&(y=w),M&&!t&&(y=-1),e=t?--y:++y;else{if(L&&t||M&&!t)return!1;e=t?--y:++y}p="x"==x?{left:e>=w-1?-(f-b)*v:-e*$*v}:{top:e>=w-1?-(f-b)*g:-e*$*g},i.speed?m.animate(p,i.speed,s):(m.css(p),s())}function r(t,a){for(var s=P?e("."+t).eq(0):e('<div class="'+t+'"></div>'),i=0;w>i;i++)s.append("<em "+(0===i?" class="+a:"")+' title="'+(i+1)+'">'+(i+1)+"</em>");P||u.after(s)}function l(){var t=T?e(D).eq(0):e('<div class="'+D.replace(".","")+'"></div>');t.html("<b>1</b>/"+w),T||u.after(t)}function d(t){J&&e("."+F).find("em").removeClass(W).eq(t).addClass(W),S&&e(D).html("<b>"+(t+1)+"</b>/"+w)}function c(){C.unbind(I).bind(I,function(){o(y,!0)}),k.unbind(I).bind(I,function(){o(y,!1)})}var p,u=e(this),m=u.find("ul").eq(0),h=m.children("li"),f=h.length,v=null,g=null,k="string"==typeof i.next?e(i.next):i.next,C="string"==typeof i.prev?e(i.prev):i.prev,y=0,$=i.step,b=i.visible,w=Math.ceil((f-b)/$)+1,j=i.loop,x=i.direction,I=i.evtType,Q=i.disableClass,_=i.disableClassPerfix?"prev-"+Q:Q,N=i.disableClassPerfix?"next-"+Q:Q,J=i.navItems,F=i.navItmesWrapClass,P=e("."+F).length>0,W=i.navItemActivedClass,S=i.status,D=i.statusWrapSelector,T=e(D).length>0,M=!1,L=!0,q=0===(f-b)%$,Y=i.template||'<ul>{for slide in list}<li><a href="${slide.href}" target="_blank"><img src="${slide.src}" alt="${slide.alt}" /></a></li>{/for}</ul>';if(i.data.length>0){if(!i.width||!i.height)return!1;n(i.data)}f>b&&b>=$?(t(x),c(),J&&r(F,W),S&&l(D)):(i.showControl?k.add(C).show():k.add(C).hide(),C.addClass(_),k.addClass(N))})}})(jQuery);var Footprint=function(e,t,a,s,i,n){this.sku=e,this.rid=t,this.locId=a,this.lim=i||20,this.onLoad=n||function(){},this.pin=readCookie("pin"),this.pid=null===a?1:a.split("-")[0],this.el=s,this.init()};Footprint.prototype={init:function(){var e=readCookie("__jda"),t="book"==document.body.id;this.uuid=e?"-"==e.split(".")[1]?-1:e.split(".")[1]:-1,202001===this.rid&&(this.ck=t?"bview":"aview"),202e3===this.rid&&(this.ck="pin,ipLocation,btw,bview"),202002===this.rid&&(this.ck="pin,ipLocation,atw,aview"),this.get(this.rid)},get:function(e){var t=this,a={sku:this.sku,p:e||this.rid,lid:this.pid,lim:this.lim,uuid:this.uuid,ec:"utf-8",ck:this.ck};if("undefined"!=typeof pageConfig&&pageConfig.product)for(var s=0;pageConfig.product.cat.length>s;s++)a["c"+(s+1)]=pageConfig.product.cat[s];$.ajax({url:"http://diviner.jd.com/diviner",data:a,dataType:"jsonp",scriptCharset:"utf-8",success:function(e){t.set(e)}})},set:function(e){var t=this;t.el;var a=pageConfig.wideVersion&&pageConfig.compatible?5:4,s='<div id="maybe-like" class="m m2">    <div class="mt">        <h2>\u6839\u636e\u6d4f\u89c8\u731c\u4f60\u559c\u6b22</h2>        <div class="extra"><a href="http://my.jd.com/personal/guess.html" target="_blank">\u66f4\u591a\u63a8\u8350</a></div>    </div>    <div class="mc">        <a class="guess-control disabled" id="guess-forward">&lt;</a><a class="guess-control" id="guess-backward">&gt;</a>        <div id="guess-scroll">            <ul class="lh">                {for item in data}                <li ${pageConfig.getFootPrintClk(item, item_index).guess} id="guess-${item.sku}" data-push="${pageConfig.footPrintSkus.push(item.sku)}" data-clk="${item.clk}">                    <div class="p-img"><a target="_blank" title="${item.t}" href="http://item.jd.com/${item.sku}.html"><img height="130" width="130" alt="" src="${pageConfig.FN_GetImageDomain(item.sku)}n3/${item.img}" alt="${item.t}"></a></div>                    <div class="p-name"><a target="_blank" title="${item.t}" href="http://item.jd.com/${item.sku}.html">${item.t}</a></div>                    <div class="p-comm">                        <span class="star sa5"></span><br>                        <a target="_blank" href="http://club.jd.com/review/${item.sku}-1-1.html">(\u5df2\u67090\u4eba\u8bc4\u4ef7)</a>                    </div>                    <div class="p-price"><strong class="J-p-${item.sku}">\uffe5</strong></div>                </li>                {/for}            </ul>        </div>    </div></div>',i='<div id="recent-view-track" class="m m2">    <div class="mt">        <h2>\u6700\u8fd1\u6d4f\u89c8</h2>        <div class="extra"><a href="http://my.jd.com/history/list.html" target="_blank">\u66f4\u591a</a></div>    </div>    <div class="mc">        <ul>            {for item in data}            <li ${pageConfig.getFootPrintClk(item, item_index).recent} data-push="${pageConfig.footPrintSkus.push(item.sku)}" data-clk="${item.clk}">                <div class="p-img"><a target="_blank" title="${item.t}" href="http://item.jd.com/${item.sku}.html"><img height="50" width="50" alt="" src="${pageConfig.FN_GetImageDomain(item.sku)}n5/${item.img}" alt="${item.t}"></a></div>                <div class="p-name"><a target="_blank" title="${item.t}" href="http://item.jd.com/${item.sku}.html">${item.t}</a></div>                <div class="p-price"><strong class="J-p-${item.sku}">\uffe5</strong></div>            </li>            {/for}            <li class="all-recent" style="text-align:right;padding:5px 0;"><a href="http://my.jd.com/history/list.html" target="_blank" style="color:#005ea7;">\u5168\u90e8\u6d4f\u89c8\u5386\u53f2 <span style="font-family:simsun;">&gt;</span></a></li>        </ul>    </div></div>';e.success&&e.data&&e.data.length>0?(pageConfig.footPrintSkus=[],202e3===this.rid&&this.el.html(s.process(e)),202002===this.rid&&this.el.html(s.process(e)),202001===this.rid?this.el.html(i.process(e)):this.getCommentData(pageConfig.footPrintSkus),this.el.find("img").Jlazyload({type:"image"}),this.setTrackCode(e.impr),$("#guess-scroll").imgScroll({visible:a,step:a,prev:"#guess-forward",next:"#guess-backward"}),this.getPriceNum(pageConfig.footPrintSkus,this.wrap)):202001===this.rid?this.el.find(".mc").html('<div class="no-track"><h4>\u60a8\u8fd8\u672a\u5728\u4eac\u4e1c\u7559\u4e0b\u8db3\u8ff9</h4><p>\u5728\u60a8\u7684\u8d2d\u7269\u65c5\u7a0b\u4e2d\uff0c\u60a8\u53ef\u4ee5\u968f\u65f6\u901a\u8fc7\u8fd9\u91cc\u67e5\u770b\u60a8\u4e4b\u524d\u7684\u6d4f\u89c8\u8bb0\u5f55\uff0c\u4ee5\u4fbf\u5feb\u6377\u8fd4\u56de\u60a8\u66fe\u7ecf\u611f\u5174\u8da3\u7684\u9875\u9762\u3002</p></div>'):this.el.find(".mc").html("\u6682\u65e0\u63a8\u8350"),this.onLoad&&this.onLoad(e)},getPriceNum:function(e,t,a,s){e="string"==typeof e?[e]:e,t=t||$("body"),a=a||"J-p-",$.ajax({url:"http://p.3.cn/prices/mgets?skuIds=J_"+e.join(",J_")+"&type=1",dataType:"jsonp",success:function(e){if(!e&&!e.length)return!1;for(var i=0;e.length>i;i++){var n=e[i].id.replace("J_",""),o=parseFloat(e[i].p,10);o>0?t.find("."+a+n).html("\uffe5"+e[i].p):t.find("."+a+n).html("\u6682\u65e0\u62a5\u4ef7"),"function"==typeof s&&s(n,o,e)}}})},getCommentData:function(e,t,a){e=e||[],t=t||$("body").eq(0),a=a||"guess-",$.ajax({url:"http://club.jd.com/clubservice.aspx?method=GetCommentsCount&referenceIds="+e,dataType:"jsonp",success:function(e){var t;if(e&&e.CommentsCount.length){t=e.CommentsCount.length;for(var s=0;t>s;s++)$("#"+a+e.CommentsCount[s].SkuId).find(".star").removeClass("sa5").addClass("sa"+e.CommentsCount[s].AverageScore),$("#"+a+e.CommentsCount[s].SkuId).find(".p-comm a").html("(\u5df2\u6709"+e.CommentsCount[s].CommentCount+"\u4eba\u8bc4\u4ef7)")}}})},setTrackCode:function(e){var t=this.el.find("li"),a=this,s="&m=UA-J2011-1&ref="+encodeURIComponent(document.referrer);t.each(function(){var e=$(this).attr("data-clk");$(this).bind("click",function(t){var i=$(t.target);(i.is("a")||i.is("img")||i.is("span"))&&a.newImage(e+s,!0)})}),this.newImage(e+s,!0)},newImage:function(e,t,a){var s=new Image;e=t?e+"&random="+Math.random()+new Date:e,s.setAttribute("src",e),s.onload=function(){a!==void 0&&a(e)}}},pageConfig.getFootPrintClk=function(e,t){var a="book"==document.body.id,s={item:e,ind:t};return a?{recent:" onclick=\"clsLog('${item.sku}&HomeHis', '', '${item.sku}#${item.jp}', ${ind}, 'reWidsBookHis');\"".process(s),guess:" onclick=\"clsLog('${item.sku}&HomeTrack', '', '${item.sku}#${item.jp}', ${ind}, 'reWidsBookTrack');\"".process(s)}:{recent:" onclick=\"clsClickLog('', '', '${item.sku}', 3, ${ind}, 'rodGlobalHis');\"".process(s),guess:" onclick=\"clsClickLog('', '', '${item.sku}', 2, ${ind}, 'rodGlobalTrack');\"".process(s)}},function(){var e="book"==document.body.id;$("#product-track").html('<div class="right"> <div id="maybe-like" class="m m2" data-widget="tabs"> <div class="mt"> <h2>\u6839\u636e\u6d4f\u89c8\u731c\u4f60\u559c\u6b22</h2> <div class="extra"> </div> </div> <div class="mc"> <div class="iloading">\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019...</div> </div> </div></div><div class="left"> <div id="recent-view-track" class="m m2"> <div class="mt"> <h2>\u6700\u8fd1\u6d4f\u89c8</h2> </div> <div class="mc"> <div class="iloading">\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019...</div> </div> </div> </div><span class="clr"></span>').attr("data-lazyload",!0),$("#product-track").Jlazyload({type:"module"},function(){e?(new Footprint("",202001,readCookie("ipLoc-djd"),$("#product-track .left"),20,function(){log("BOOK&HomeHis","Show")}),new Footprint("",202e3,readCookie("ipLoc-djd"),$("#product-track .right"),20,function(){log("BOOK&HomeTrack","Show")})):(new Footprint("",202001,readCookie("ipLoc-djd"),$("#product-track .left"),20,function(){clsPVAndShowLog("","",3,"s")}),new Footprint("",202002,readCookie("ipLoc-djd"),$("#product-track .right"),20,function(){clsPVAndShowLog("","",2,"s")}))})}();